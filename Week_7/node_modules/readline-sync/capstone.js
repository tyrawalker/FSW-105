const readlineSync = require ('readline-sync');
const name = readlineSync.question("What is your name?"); 

readlineSync.question (`Hello ${name}, welcome to DOOM. Do you have what it takes? Press ENTER to continue`);
const options = ["Walk", "Exit", "Print" ];
const badGuys = ["Banshee", "Siren", "Harbinger", "Succubus"];
const treasure = ["Elixir", "Gold", "Shotgun", "Cherry Bomb"];
var prize = [];
let playerHealth = 50;

let bounty = treasure[Math.floor(math.random()* treasure.length)];

function game () {
    const attackPower = [math.floor(math.random()*2 )]; 
    const attacker = badGuys[math.floor(math.random()* badGuys.length)];
    let attackerHealth = 50; 
    const attackerpower = [math.floor (math.random()*3)];

    const index = readlineSync.keyInSelect(options, "What would you like to do next?" );

    if (options [index] == "Exit"){
        return playerHealth = 0; 
    }else if (options [index] == "Print"){
        console.log (name + `/n` + playerHealth + bounty)
    }else if (options [index] == "Walk"){
        let key = math.random();
        if (key >=.3){
            console.log ("Walking.....")
        }else if (key < .3){
            console.log (attacker + "showed up"); 

            while (attackerHealth > 0 && playerHealth >0){
                const user = readlineSync.question ("What would you like to do? Press R to run or A to attack"); 
                
                switch (user){
                    case 'R':
                        const run = math.random(); 
                        if (run>.5){
                            console.log (attacker + "caught you and attacked with" + attackerpower);
                        }else if (run <.5){
                            console.log (name +", you got lucky this time"); 
                            break;
                        
                        }
                    case  'A':
                        attackerHealth -= attackPower; 
                        console.log (`You attacked ${attacker} with ${attackPower} attack power`); 
                    
                        playerHealth -= attackerpower; 
                        console.log (`${attacker} just attacked you with ${attackerpower} attack power`);

                        if (attackerHealth<= 0){
                            console.log (`${name}, you just killed ${attacker}, claim your ${bounty}`)
                            let inventory = math.random(); 
                            if (inventory<=.3){
                                prize.push(bounty); 
                            }else if (playerHealth <= 0){
                                console.log (`${attacker} defeated you ${name}, your are Dead!!!`)
                            }
                    } 
            }
        }
    }
}}